<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevHealth OS | Programador Atleta</title>
    <style>
        :root {
            --bg: #0b0e14;
            --card: #151921;
            --accent: #79c0ff;
            --text: #adbac7;
            --success: #57ab5a;
            --border: #444c56;
        }
        body {
            font-family: 'Fira Code', monospace;
            background-color: var(--bg);
            color: var(--text);
            margin: 0; padding: 15px;
        }
        .container { max-width: 700px; margin: auto; }
        .tabs { display: flex; gap: 5px; margin-bottom: 15px; }
        .tab-btn {
            flex: 1; padding: 12px; background: var(--card);
            border: 1px solid var(--border); color: var(--text);
            cursor: pointer; border-radius: 5px;
        }
        .tab-btn.active { border-color: var(--accent); color: var(--accent); background: #1c212b; }
        .card {
            background: var(--card); border: 1px solid var(--border);
            border-radius: 8px; padding: 18px; margin-bottom: 15px;
        }
        h2 { color: var(--accent); font-size: 1.1rem; margin-top: 0; display: flex; align-items: center; gap: 10px; }
        .macro-box {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 10px;
        }
        .macro-item { background: #22272e; padding: 8px; border-radius: 5px; text-align: center; border: 1px solid var(--border); }
        .macro-val { display: block; font-weight: bold; color: white; }
        .macro-lab { font-size: 0.65rem; color: #768390; }
        .check-item { display: flex; align-items: center; gap: 12px; padding: 10px 0; border-bottom: 1px solid #22272e; }
        input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--success); cursor: pointer; }
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        th, td { text-align: left; padding: 10px; border-bottom: 1px solid var(--border); }
        th { color: var(--accent); }
        .hidden { display: none; }
        .menu-actions { display: flex; gap: 8px; margin-bottom: 10px; }
        .btn {
            padding: 8px 10px; background: #1c212b; color: var(--text);
            border: 1px solid var(--border); border-radius: 5px; cursor: pointer;
        }
        .btn:hover { border-color: var(--accent); color: var(--accent); }
    </style>
</head>
<body>

<div class="container">
    <header style="text-align:center; padding: 20px 0;">
        <h1 style="color: white; margin:0;">Control  de rutina diaria.</h1>
        <p style="font-size: 0.8rem;">D√©ficit Cal√≥rico: 2250 kcal | Alcohol: 0%</p>
    </header>

    <div class="tabs">
        <button class="tab-btn active" onclick="openTab(event,'dash')">DASHBOARD</button>
        <button class="tab-btn" onclick="openTab(event,'kitchen')">COOKBOOK</button>
    </div>

    <div id="dash" class="content">
        <div class="card">
            <h2>üìä Objetivos diarios</h2>
            <div class="macro-box">
                <div class="macro-item"><span class="macro-val">2250</span><span class="macro-lab">KCAL</span></div>
                <div class="macro-item"><span class="macro-val">180g</span><span class="macro-lab">PROT</span></div>
                <div class="macro-item"><span class="macro-val">225g</span><span class="macro-lab">CARB</span></div>
                <div class="macro-item"><span class="macro-val">70g</span><span class="macro-lab">GRASA</span></div>
            </div>
        </div>

        <div class="card">
            <h2>üèãÔ∏è <span id="day-title">Rutina</span></h2>
            <div id="exercises"></div>
        </div>

        <div class="card">
            <h2>‚úÖ Checklist diario</h2>
            <div id="checklist-container"></div>
            <button class="btn" onclick="resetChecklist()">üîÑ Resetear checklist</button>
        </div>
    </div>

    <div id="kitchen" class="content hidden">
        <div class="card">
            <h2>üç¥ Matriz de nutrici√≥n</h2>
            <div class="menu-actions">
                <button class="btn" onclick="loadMenu()">üîÅ Re-aleatorizar men√∫</button>
            </div>
            <table>
                <thead>
                    <tr><th>Hora</th><th>Opci√≥n A</th><th>Opci√≥n B</th><th>Opci√≥n C</th></tr>
                </thead>
                <tbody id="menu-table"></tbody>
            </table>
        </div>
        <div class="card">
            <h2>üíä Suplementaci√≥n</h2>
            <p>‚Ä¢ <strong>Creatina:</strong> 5g en el batido post-gym.</p>
            <p>‚Ä¢ <strong>Whey Protein:</strong> 1 scoop para completar prote√≠na.</p>
        </div>
    </div>
</div>

<script>
    // H√°bitos con persistencia
    const habits = [
        "Abstinencia Alcohol (D√≠a +1)",
        "Entreno 05:30 AM (70‚Äì90 min)",
        "Creatina 5g completada",
        "Porci√≥n de Arroz incluida",
        "3L de Agua ingeridos",
        "D√©ficit Cal√≥rico respetado"
    ];
    function resetChecklist() {
        habits.forEach((h, i) => {
            localStorage.removeItem(`habit-${i}`);
        });
        init(); // recarga la interfaz con todo desmarcado
    }

    // Rutinas extendidas para 70‚Äì90 min (con volumen y accesorios)
    const routines = {
        1: { 
            name: "Lunes: Empuje (Push)", 
            exc: [
                "Press Banca 4x8‚Äì10 (RPE 8)",
                "Press Inclinado Mancuernas 4x10‚Äì12",
                "Press Militar Barra 4x6‚Äì8",
                "Fondos en paralelas 3x10‚Äì12",
                "Copa Tr√≠ceps 3x12‚Äì15",
                "Elevaciones Laterales 4x15‚Äì20",
                "P√°jaros (deltoide post.) 3x15",
                "Flexiones 3xAMRAP",
                "Core: Plancha 3x45s"
            ]
        },
        2: { 
            name: "Martes: Tir√≥n (Pull)", 
            exc: [
                "Dominadas/Chin Ups 4xAMRAP",
                "Jal√≥n al pecho 4x10‚Äì12",
                "Remo con barra 4x6‚Äì8",
                "Remo mancuerna 3x10‚Äì12 por lado",
                "Facepulls 4x15‚Äì20",
                "Curl barra 3x10‚Äì12",
                "Curl martillo 3x12‚Äì15",
                "Trapecio: Encogimientos 4x12",
                "Core: Hollow hold 3x30‚Äì40s"
            ]
        },
        3: { 
            name: "Mi√©rcoles: Empuje (Push)", 
            exc: [
                "Press Banca Inclinado 4x8‚Äì10",
                "Press con mancuernas 4x10‚Äì12",
                "Fondos (lastrados si posible) 3x8‚Äì10",
                "Tr√≠ceps en polea 4x12‚Äì15",
                "Elevaciones frontales 3x12‚Äì15",
                "Laterales en drop set x2",
                "Pec deck / vuelos 3x12‚Äì15",
                "Flexiones diamante 3xAMRAP",
                "Core: Rueda abdominal 3x10"
            ]
        },
        4: { 
            name: "Jueves: Tir√≥n (Pull)", 
            exc: [
                "Remo en polea baja 4x8‚Äì10",
                "Peso muerto rumano 4x8‚Äì10",
                "Jal√≥n neutro 4x10‚Äì12",
                "Remo T-bar 3x8‚Äì10",
                "Posteriores (reverse fly) 4x15‚Äì20",
                "Curl inclinado 3x10‚Äì12",
                "Curl concentrado 3x12‚Äì15",
                "Antebrazo: extensiones 3x15",
                "Core: Side plank 3x30s por lado"
            ]
        },
        5: { 
            name: "Viernes: Pierna Full", 
            exc: [
                "Sentadilla (goblet o barra) 5x6‚Äì10",
                "Prensa 4x10‚Äì12",
                "Peso muerto rumano 4x8‚Äì10",
                "Desplantes caminando 3x12 por lado",
                "Extensiones de cu√°driceps 3x12‚Äì15",
                "Curl femoral 3x12‚Äì15",
                "Elevaci√≥n de gemelos 5x15‚Äì20",
                "Gl√∫teo: hip thrust 4x8‚Äì12",
                "Core: Farmer walk 3x40m"
            ]
        },
        6: { 
            name: "S√°bado: Cardio + movilidad", 
            exc: [
                "Caminar r√°pido / trote 45‚Äì60 min",
                "Interv√°lico ligero 10‚Äì15 min (opc.)",
                "Movilidad: caderas, hombros 20 min",
                "Estiramientos 10 min",
                "Respiraci√≥n diafragm√°tica 5 min"
            ]
        },
        0: { 
            name: "Domingo: Descanso activo", 
            exc: [
                "Meal prep 60‚Äì90 min",
                "Caminar 20‚Äì30 min",
                "Movilidad suave 10‚Äì15 min"
            ]
        }
    };

    // Men√∫: muchas recetas por hora, se muestran 3 aleatorias
    const menu = {
        "05:00": [
            "Pl√°tano + Caf√©",
            "Toast integral + Miel",
            "1/2 Manzana",
            "Smoothie verde (espinaca, manzana)",
            "Pan integral + Aguacate",
            "Yogur griego natural",
            "K√©fir + frutos rojos",
            "T√© verde + d√°tiles",
            "Protein coffee (caf√© + whey)",
            "Nueces + espresso"
        ],
        "07:30": [
            "Whey + Avena + Creatina",
            "Huevos c/ Manchego",
            "Yogur + Avena",
            "Hotcakes de avena",
            "Omelette de claras + espinaca",
            "Molletes integrales ligeros",
            "Pan pita + hummus + jitomate",
            "Queso cottage + fruta",
            "Chilaquiles light (horno) + pollo",
            "Avena overnight + ch√≠a"
        ],
        "13:00": [
            "Pollo + Arroz + Aguacate",
            "Res + Arroz + Verduras",
            "Tilapia + Arroz",
            "Ensalada de garbanzos + pepino",
            "Salm√≥n + Quinoa + esp√°rragos",
            "Pechuga grill + papa cocida",
            "Tacos de arrachera (ma√≠z) + pico",
            "Bowl de at√∫n + arroz + edamame",
            "Lomo de cerdo + camote",
            "Fajitas de pollo + pimientos"
        ],
        "17:00": [
            "Quesadilla Manchego (ma√≠z)",
            "Manzana + Whey",
            "Tortilla c/ Aguacate",
            "Batido de pl√°tano + cacahuate",
            "S√°ndwich integral + pavo",
            "Galletas de arroz + cottage",
            "Hummus + zanahoria",
            "Trail mix (controlado)",
            "Yogur griego + miel",
            "Gelatina proteica"
        ],
        "20:30": [
            "Lentejas + Soya",
            "At√∫n + Ensalada",
            "Tacos de Tilapia",
            "Sopa de verduras + tofu",
            "Pechuga + Espinaca salteada",
            "Caldo de pollo (light) + verduras",
            "Ensalada C√©sar light (pollo)",
            "Tostadas de tinga (ma√≠z, light)",
            "Revuelto de claras + champi√±√≥n",
            "Pavo + br√≥coli al vapor"
        ]
    };

    function openTab(evt, id) {
        document.querySelectorAll('.content').forEach(c => c.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        evt.currentTarget.classList.add('active');
    }

    // Sample aleatorio sin sesgo de sort()
    function sampleArray(arr, k = 3) {
        const copy = arr.slice();
        for (let i = copy.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [copy[i], copy[j]] = [copy[j], copy[i]];
        }
        return copy.slice(0, k);
    }

    function loadMenu() {
        const table = document.getElementById('menu-table');
        table.innerHTML = "";
        for (const hora in menu) {
            const opciones = sampleArray(menu[hora], 3);
            table.innerHTML += `<tr>
                <td>${hora}</td>
                <td>${opciones[0]}</td>
                <td>${opciones[1]}</td>
                <td>${opciones[2]}</td>
            </tr>`;
        }
    }

    function init() {
        // Cargar Rutina del d√≠a
        const day = new Date().getDay(); // 0 = Domingo, 1 = Lunes ...
        document.getElementById('day-title').innerText = routines[day].name;
        document.getElementById('exercises').innerHTML = routines[day].exc
            .map(e => `<div class="check-item">üîπ ${e}</div>`).join('');

        // Cargar Men√∫ aleatorio
        loadMenu();

        // Cargar Checklist con LocalStorage
        const checklistContainer = document.getElementById('checklist-container');
        checklistContainer.innerHTML = "";
        habits.forEach((h, i) => {
            const checked = localStorage.getItem(`habit-${i}`) === 'true' ? 'checked' : '';
            checklistContainer.innerHTML += `
                <div class="check-item">
                    <input type="checkbox" id="h${i}" ${checked} onclick="saveHabit(${i}, this.checked)">
                    <label for="h${i}">${h}</label>
                </div>`;
        });
    }

    function saveHabit(id, isChecked) {
        localStorage.setItem(`habit-${id}`, isChecked);
    }

    init();
</script>
</body>
</html>
